import unittest
from connect_four_tactic import connect_four_tactic


class TestConnectFour(unittest.TestCase):

    def test_get_field_after_move_r(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]

        self.assertEqual([['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-']],
                         connect_four_tactic.set_point_r(field, -1, 3))

    def test_get_field_after_move_y(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]
        self.assertEqual([['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', '-', '-', '-', '-'],
                          ['-', '-', '-', 'Y', '-', '-', '-']],
                         connect_four_tactic.set_point_y(field, -1, 3))

    def test_get_field_after_move_r2(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-'],
                 ['-', '-', '-', 'Y', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-'],
                 ['-', '-', '-', 'Y', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-']]
        self.assertEqual([['-', '-', '-', 'R', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-'],
                          ['-', '-', '-', 'Y', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-'],
                          ['-', '-', '-', 'Y', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-']],
                         connect_four_tactic.set_point_r(field, -1, 3))

    def test_get_field_after_move_y2(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-'],
                 ['-', '-', '-', 'Y', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-'],
                 ['-', '-', '-', 'Y', '-', '-', '-'],
                 ['-', '-', '-', 'R', '-', '-', '-']]
        print(connect_four_tactic.set_point_y(field, -1, 3))
        self.assertEqual([['-', '-', '-', 'Y', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-'],
                          ['-', '-', '-', 'Y', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-'],
                          ['-', '-', '-', 'Y', '-', '-', '-'],
                          ['-', '-', '-', 'R', '-', '-', '-']],
                         connect_four_tactic.set_point_r(field, -1, 3))

    def test_next_move_difficulty_impossible(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]
        for i in range(0, 8):
            self.assertEqual((3, False), connect_four_tactic.next_move(field, 'x', 'o', '-', 0))

    def test_next_move_difficulty_hard(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]
        self.assertEqual(type((2, False)), type((connect_four_tactic.next_move(field, 'x', 'o', '-', 5))))

    def test_next_move_difficulty_medium(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]
        self.assertEqual(type((2, False)), type((connect_four_tactic.next_move(field, 'x', 'o', '-', 10))))

    def test_next_move_difficulty_easy(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-']]
        self.assertEqual(type((2, False)), type((connect_four_tactic.next_move(field, 'x', 'o', '-', 20))))

    def test_next_move_winning(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', 'x', '-', '-', 'o', '-', '-'],
                 ['-', 'x', '-', '-', 'o', '-', '-'],
                 ['-', 'x', '-', '-', 'o', '-', '-']]
        self.assertEqual((1, True), connect_four_tactic.next_move(field, 'x', 'o', '-', 0), )

    def test_next_move_defending(self):
        field = [['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', '-', '-'],
                 ['-', '-', '-', '-', '-', 'o', '-'],
                 ['-', '-', '-', '-', '-', 'o', '-'],
                 ['-', '-', 'x', 'x', '-', 'o', 'x']]
        self.assertEqual((5, False), connect_four_tactic.next_move(field, 'x', 'o', '-', 0))

    def test_next_move_full(self):
        field = [['R', 'R', 'Y', 'y', 'R', 'R', 'Y'],
                 ['Y', 'Y', 'R', 'R', 'Y', 'Y', 'R'],
                 ['R', 'R', 'Y', 'Y', 'R', 'R', 'Y'],
                 ['Y', 'Y', 'R', 'R', 'Y', 'Y', 'R'],
                 ['R', 'R', 'Y', 'Y', 'R', 'R', 'Y'],
                 ['Y', 'Y', 'R', 'R', 'Y', 'Y', 'R']]
        self.assertIsNone(connect_four_tactic.next_move(field, 'x', 'o', '-', 0))
